
#ifndef CALIBRATION_H
#define CALIBRATION_H

#include "MLX90640_API.h"

// nice way to split away isolated code to another module
namespace MLXcalibration {

	void clearUserCalibrationOffsets();

	int  readUserCalibrationOffsets();
	void readUserCalibrationOffsetsDate(char* strDate);

	int  writeUserCalibrationOffsets(const char* httpDate);
	int  writeUserCalibrationOffsets(const char* httpDate, const char*  buf);

	int  writeDefaultCalibrationOffsets();

	int  setUserCalibrationOffsetsEnabled(uint8_t enabled);
	int  getUserCalibrationOffsetsEnabled();

	void applyUserCalibrationOffsets(mlx_fb_t& fb);
}


const float calibration_offsets_default[MLX90640_pixelCOUNT] = {
	2.41, 2.49, 1.82, 2.03, 1.82, 1.84, 1.49, 1.66, 1.57, 1.58, 1.16, 1.54, 1.37, 1.43, 1.25, 1.34, 1.41, 1.44, 1.22, 1.42, 1.56, 1.54, 1.44, 1.65, 1.79, 1.75, 1.65, 2.02, 2.14, 2.43, 2.28, 2.92,
	2.42, 2.41, 1.98, 1.98, 1.83, 1.84, 1.60, 1.72, 1.43, 1.39, 1.28, 1.49, 1.34, 1.43, 1.32, 1.48, 1.30, 1.46, 1.28, 1.50, 1.29, 1.62, 1.49, 1.78, 1.63, 1.76, 1.84, 1.97, 2.02, 2.34, 2.43, 2.89,
	2.16, 2.03, 1.67, 1.88, 1.65, 1.71, 1.24, 1.53, 1.29, 1.34, 1.17, 1.31, 1.32, 1.23, 1.13, 1.31, 1.24, 1.20, 0.96, 1.34, 1.24, 1.38, 1.10, 1.56, 1.45, 1.72, 1.53, 1.89, 1.91, 1.95, 1.91, 2.54,
	2.12, 2.20, 1.64, 1.83, 1.66, 1.76, 1.25, 1.60, 1.36, 1.35, 1.19, 1.28, 1.16, 1.41, 1.20, 1.23, 1.20, 1.32, 1.07, 1.36, 1.29, 1.41, 1.29, 1.42, 1.54, 1.58, 1.55, 1.96, 1.80, 2.28, 2.00, 2.43,
	1.87, 1.82, 1.48, 1.78, 1.51, 1.37, 1.12, 1.27, 1.22, 1.25, 0.96, 1.11, 1.09, 1.18, 0.88, 1.09, 1.17, 1.30, 0.91, 1.20, 1.09, 1.37, 1.14, 1.30, 1.30, 1.51, 1.51, 1.61, 1.72, 2.04, 1.81, 2.25,
	1.80, 2.00, 1.49, 1.51, 1.45, 1.45, 1.18, 1.35, 1.12, 1.29, 1.02, 1.18, 1.20, 1.12, 0.91, 1.33, 1.04, 1.21, 1.03, 1.27, 1.06, 1.26, 1.08, 1.32, 1.27, 1.51, 1.44, 1.73, 1.70, 1.89, 1.86, 2.37,
	1.83, 1.66, 1.38, 1.56, 1.42, 1.34, 1.10, 1.36, 1.25, 1.18, 0.89, 1.12, 1.09, 1.11, 0.85, 1.06, 0.96, 1.13, 0.92, 1.16, 1.09, 1.09, 1.08, 1.14, 1.25, 1.34, 1.16, 1.68, 1.74, 1.69, 1.79, 2.15,
	1.66, 1.85, 1.41, 1.55, 1.31, 1.39, 1.02, 1.31, 1.18, 1.30, 0.91, 1.14, 0.99, 1.25, 0.91, 1.16, 1.11, 1.27, 0.95, 1.17, 1.05, 1.19, 1.08, 1.30, 1.18, 1.43, 1.37, 1.51, 1.69, 1.83, 1.84, 2.08,
	1.59, 1.79, 1.26, 1.61, 1.31, 1.32, 1.10, 1.35, 1.16, 1.09, 0.82, 1.03, 1.08, 1.04, 0.91, 1.22, 1.07, 1.06, 0.92, 1.28, 1.06, 1.19, 1.04, 1.29, 1.31, 1.21, 1.26, 1.55, 1.64, 1.63, 1.58, 1.99,
	1.68, 1.62, 1.25, 1.61, 1.28, 1.37, 1.03, 1.33, 1.07, 1.17, 1.03, 1.17, 1.04, 1.14, 0.92, 1.07, 1.05, 1.31, 0.90, 1.24, 1.06, 1.26, 1.03, 1.35, 1.11, 1.40, 1.29, 1.43, 1.60, 1.64, 1.82, 2.12,
	1.62, 1.77, 1.35, 1.52, 1.23, 1.30, 1.02, 1.35, 1.15, 1.18, 0.88, 1.14, 1.01, 1.11, 0.83, 1.05, 0.93, 1.12, 0.82, 1.18, 1.16, 1.21, 0.88, 1.20, 1.23, 1.30, 1.11, 1.40, 1.72, 1.68, 1.66, 1.88,
	1.64, 1.67, 1.35, 1.42, 1.37, 1.23, 1.10, 1.31, 1.03, 1.30, 0.98, 1.10, 1.04, 1.11, 0.92, 1.17, 1.04, 1.14, 1.04, 1.17, 1.14, 1.16, 1.06, 1.22, 1.28, 1.33, 1.23, 1.60, 1.51, 1.82, 1.74, 2.12,
	1.59, 1.73, 1.24, 1.46, 1.38, 1.37, 1.18, 1.23, 1.08, 1.10, 0.91, 1.21, 1.06, 1.18, 0.96, 1.18, 0.98, 1.02, 0.94, 1.28, 1.11, 1.20, 1.00, 1.22, 1.22, 1.34, 1.21, 1.47, 1.56, 1.59, 1.62, 2.06,
	1.64, 1.74, 1.48, 1.66, 1.41, 1.41, 1.07, 1.28, 1.04, 1.18, 1.03, 1.18, 1.10, 1.24, 0.85, 1.19, 1.12, 1.23, 1.10, 1.20, 1.14, 1.30, 1.16, 1.20, 1.25, 1.42, 1.34, 1.48, 1.58, 1.81, 1.84, 2.15,
	1.70, 1.67, 1.38, 1.57, 1.38, 1.36, 1.17, 1.42, 1.15, 1.18, 0.91, 1.22, 1.17, 1.08, 1.01, 1.16, 1.17, 1.11, 0.93, 1.21, 1.11, 1.28, 1.06, 1.39, 1.31, 1.32, 1.34, 1.58, 1.73, 1.73, 1.68, 2.16,
	1.77, 1.78, 1.47, 1.66, 1.24, 1.52, 1.11, 1.37, 1.13, 1.22, 1.11, 1.37, 1.17, 1.27, 1.04, 1.34, 1.11, 1.27, 1.04, 1.34, 1.28, 1.22, 1.07, 1.33, 1.20, 1.48, 1.37, 1.67, 1.69, 1.89, 1.81, 2.23,
	1.78, 1.82, 1.34, 1.58, 1.39, 1.51, 1.04, 1.31, 1.21, 1.29, 0.96, 1.28, 1.07, 1.25, 1.09, 1.34, 1.23, 1.25, 1.05, 1.41, 1.21, 1.31, 1.22, 1.52, 1.32, 1.51, 1.37, 1.74, 1.68, 1.87, 1.84, 2.36,
	1.70, 1.89, 1.54, 1.76, 1.27, 1.45, 1.20, 1.48, 1.23, 1.38, 1.12, 1.45, 1.14, 1.43, 1.12, 1.34, 1.22, 1.33, 1.20, 1.55, 1.39, 1.53, 1.32, 1.52, 1.37, 1.57, 1.51, 1.84, 1.79, 2.13, 2.14, 2.46,
	1.96, 1.95, 1.80, 1.96, 1.77, 1.69, 1.49, 1.72, 1.56, 1.65, 1.21, 1.64, 1.38, 1.39, 1.35, 1.58, 1.41, 1.58, 1.28, 1.53, 1.49, 1.55, 1.46, 1.66, 1.54, 1.58, 1.72, 2.00, 1.97, 2.04, 2.11, 2.61,
	2.00, 2.28, 1.86, 2.00, 1.67, 1.89, 1.63, 1.72, 1.45, 1.62, 1.35, 1.62, 1.37, 1.64, 1.49, 1.64, 1.29, 1.73, 1.51, 1.74, 1.52, 1.65, 1.54, 1.81, 1.61, 1.73, 1.79, 2.14, 1.87, 2.17, 2.28, 2.62,
	2.05, 2.30, 1.91, 2.18, 1.98, 1.80, 1.74, 1.97, 1.72, 1.69, 1.43, 1.90, 1.69, 1.59, 1.46, 1.77, 1.59, 1.56, 1.47, 1.81, 1.72, 1.80, 1.60, 1.76, 1.85, 1.74, 1.83, 2.19, 2.09, 2.28, 2.33, 2.73,
	2.08, 2.46, 1.85, 2.21, 1.92, 1.97, 1.58, 2.03, 1.71, 1.76, 1.55, 1.88, 1.58, 1.82, 1.44, 1.82, 1.54, 1.72, 1.64, 1.80, 1.60, 1.82, 1.80, 1.97, 1.72, 2.07, 1.93, 2.16, 2.08, 2.36, 2.39, 2.97,
	2.31, 2.57, 2.06, 2.40, 1.98, 2.19, 1.81, 1.99, 1.72, 1.84, 1.70, 2.00, 1.70, 1.81, 1.63, 1.84, 1.78, 1.74, 1.76, 2.00, 1.67, 1.88, 1.77, 2.01, 2.05, 2.08, 2.22, 2.56, 2.43, 2.58, 2.48, 2.99,
	2.07, 2.55, 2.14, 2.40, 1.99, 2.30, 1.87, 2.10, 1.73, 1.93, 1.76, 2.08, 1.60, 1.94, 1.71, 2.02, 1.69, 1.90, 1.68, 1.96, 1.87, 2.02, 1.92, 2.10, 1.96, 2.25, 2.32, 2.67, 2.40, 2.82, 2.89, 3.24
};

const char calibration_offsets_default_date[] = "Fri Nov 28 2025 11:40:35";

#endif
